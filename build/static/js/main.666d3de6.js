(()=>{"use strict";class e{constructor(e){var t=this;let{background:s,game:i}=e;this.scoreEl=null,this.renderScore=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.score;if(t.scoreEl)t.scoreEl.textContent="\u041e\u0427\u041a\u0418: ".concat(e);else{const s=t.createElement("div",{position:"absolute",top:"10px",left:"30px",fontSize:"20px",fontWeight:"bold",color:"#fff",textShadow:"1px 1px 2px black"});s.textContent="\u041e\u0427\u041a\u0418: ".concat(e),t.container.appendChild(s),t.scoreEl=s,t.addDestroyHandler((()=>s.remove()))}},this.renderBack=e=>{const t=this.createElement("div",{position:"absolute",top:"10px",right:"30px",fontSize:"20px",fontWeight:"bold",cursor:"pointer",color:"#fff",textShadow:"1px 1px 2px black"});t.textContent="\u041d\u0410\u0417\u0410\u0414",this.addDestroyHandler((()=>t.remove())),this.addEventListener(t,"click",e),this.container.appendChild(t)},this.setBackground=e=>{this.container.style.backgroundImage="url(".concat("./build/").concat(e,")")},this.destroyScene=()=>{this.destroyListeners.forEach((e=>e()))},this.addDestroyHandler=e=>{this.destroyListeners.push(e)},this.addEventListener=(e,t,s)=>{e.addEventListener(t,s),this.addDestroyHandler((()=>e.removeEventListener(t,s)))},this.destroyListeners=[],Object.assign(Object.getPrototypeOf(this),i),this.setBackground(s)}}class t extends e{constructor(e){let{game:t}=e;super({game:t,background:"/images/reit.jpg"}),this.createRow=e=>{let[t,s]=e;const i=this.createElement("div",{display:"grid",gridTemplateColumns:"1fr 1fr",color:"white",fontSize:"36px",textAlign:"center",fontWeight:"bold",borderBottom:"1px solid #fff",background:"#52484880"}),n=this.createElement("p",{});n.textContent=t,i.appendChild(n);const r=this.createElement("p",{});return r.textContent=s,i.appendChild(r),i},this.render=()=>{const e=this.createElement("div",{width:"700px",margin:"auto",display:"grid"}),t=this.createElement("p",{textAlign:"center",fontSize:"36px",color:"#f7b800",fontWeight:"bold"});t.textContent="\u0420\u0415\u0419\u0422\u0418\u041d\u0413",e.appendChild(t);const s=Object.entries(this.getRatingFromStorage());e.appendChild(this.createRow(["Login","Score"]));for(let i of s)e.appendChild(this.createRow(i));this.addDestroyHandler((()=>e.remove())),this.container.appendChild(e)},this.render(),this.renderBack((()=>{this.initScene(d)}))}}class s extends e{constructor(e){var s;let{game:i,background:n,tasks:r}=e;super({game:i,background:n}),s=this,this.scoreEl=null,this.timerEl=null,this.destroyTaskHandlers=[],this.timerId=null,this.renderTimer=e=>{var t;null===(t=this.timerEl)||void 0===t||t.remove();const s=this.createElement("div",{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",color:"#fff",fontSize:"24px",fontWeight:"bold"});s.textContent="\u0412\u0440\u0435\u043c\u044f: ".concat(e),this.timerEl=s,this.container.appendChild(s),this.addDestroyTaskHandler((()=>{var e;return null===(e=this.timerEl)||void 0===e?void 0:e.remove()}))},this.createTimer=()=>{null!==this.timerId&&window.clearInterval(this.timerId);let e=15;this.renderTimer(e),this.timerId=window.setInterval((()=>{e<=0?this.nextTask():this.renderTimer(e--)}),1e3),this.addDestroyTaskHandler((()=>window.clearInterval(this.timerId))),this.addDestroyHandler((()=>window.clearInterval(this.timerId)))},this.renderTitle=(e,t)=>{const s=this.createElement("p",{textTransform:"uppercase",fontSize:"20px",fontWeight:"700",color:"#ffffff",fontFamily:"cursive",textAlign:"center"});s.textContent=t,e.appendChild(s)},this.createTaskModal=()=>this.createElement("div",{width:"700px",background:"rgb(130 121 115 / 50%)",margin:"auto",border:"3px solid #cb9f3c",borderRadius:"16px",padding:"15px"}),this.renderHappyModal=()=>{const e=this.createElement("div",{position:"fixed",top:"50%",left:"50%",fontSize:"36px",fontWeight:"bold",transform:"translate(-50%, -50%)",padding:"20px 40px",borderRadius:"15px",background:"#4a84b6ab",color:"#fff"});e.textContent="\u0423\u0420\u041e\u0412\u0415\u041d\u042c \u041f\u0420\u041e\u0419\u0414\u0415\u041d";e.animate([{letterSpacing:0,fontSize:"18px"},{letterSpacing:"10px",fontSize:"44px"}],{duration:500}).onfinish=()=>{e.remove(),this.nextTask()},this.container.appendChild(e)},this.checkAnswer=function(e){let{isText:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=s.task.success,n=parseInt(e.target.getAttribute("data-id")),r=!!~i.findIndex((e=>e===n));if(s.attachStyle(e.target,{pointerEvents:"none",...t?{color:r?"#6ee96e":"#e52a2a"}:{background:r?"#076207d1":"#94010199"}}),e.target.setAttribute("data-disable",""),s.selectedAnswers.add(n),s.levelScore+=r?50:-50,s.renderScore(s.levelScore),r){i.every((e=>s.selectedAnswers.has(e)))&&s.renderHappyModal()}},this.destroyTask=()=>{this.destroyTaskHandlers.forEach((e=>e())),this.destroyTaskHandlers=[]},this.addDestroyTaskHandler=e=>{this.destroyTaskHandlers.push(e)},this.nextTask=()=>{++this.currentTaskIndex,this.task=this.tasks[this.currentTaskIndex],this.selectedAnswers=new Set,this.destroyTask(),this.tasks.length<=this.currentTaskIndex?(this.setScore(parseInt(this.levelScore)+this.score),"end"===this.nextLevel?this.initScene(t):(this.openLevels.push(this.nextLevel),this.initScene(o))):(this.createTimer(),this.render())},this.createAnswerVariants=()=>{const e=this.createElement("div",{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"}),t=e=>{this.attachStyle(e.target,{background:"#7d7d7dab"})},s=e=>{e.target.hasAttribute("data-disable")||this.attachStyle(e.target,{background:"none"})};return this.task.answerVariable.forEach(((i,n)=>{const r=this.createElement("div",{padding:"10px 10px",border:"2px solid #ffd000",fontSize:"22px",textTransform:"uppercase",fontFamily:"cursive",fontWeight:"bold",color:"#ffffffd9",borderRadius:" 37px",width:"100%",textAlign:"center",cursor:"pointer"});r.setAttribute("data-id",n),r.textContent=i,this.addEventListener(r,"mouseenter",t),this.addEventListener(r,"mouseleave",s),this.addEventListener(r,"click",this.checkAnswer),e.appendChild(r)})),e},this.getRandomTasks=(e,t)=>{let s=[...e];return Array.from({length:Math.min(t,s.length)}).map((()=>{const e=Math.floor(Math.random()*s.length),t=s[e];return s=s.filter((e=>e!==t)),t}))},this.tasks=this.getRandomTasks(r,3),this.tasksCount=this.tasks.length,this.currentTaskIndex=0,this.task=this.tasks[this.currentTaskIndex],this.selectedAnswers=new Set,this.levelScore=0,this.createTimer(),this.renderScore(this.levelScore),this.renderBack((()=>{this.initScene(o)}))}}const i=[{image:"/images/doctor.jpg",answerVariable:["\u043c\u044f\u0441\u043d\u0438\u043a","\u0432\u0440\u0430\u0447","\u0431\u0430\u0440\u0442","\u0434\u043e\u043a\u0442\u043e\u0440"],success:[1,3]},{image:"/images/music.jpg",answerVariable:["\u043c\u0443\u0437\u044b\u043a\u0430","\u0440\u044b\u0446\u0430\u0440\u0441\u043a\u0438\u0439 \u0442\u0443\u0440\u043d\u0438\u0440","\u0443\u0436\u0438\u043d","\u0438\u0433\u0440\u0430 \u043d\u0430 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0435"],success:[0,3]},{image:"/images/pir.png",answerVariable:["\u0441\u043e\u043d","\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a","\u043f\u0438\u0440","\u043f\u0440\u043e\u0433\u0443\u043b\u043a\u0430"],success:[1,2]},{image:"/images/pred.jpg",answerVariable:["\u043d\u0430\u043f\u0430\u0434\u0435\u043d\u0438\u0435","\u0440\u0430\u0434\u043e\u0441\u0442\u044c","\u0432\u0435\u0441\u0435\u043b\u044c\u0435","\u0443\u0431\u0438\u0439\u0441\u0442\u0432\u043e"],success:[0,3]}];const n=[{parametr:"\u0436\u0435\u043b\u0435\u0437\u043d\u044b\u0439",answerVariable:["\u041c\u0435\u0447","\u043a\u043d\u0438\u0433\u0430","\u0434\u043e\u0441\u043f\u0435\u0445","\u043f\u043b\u0430\u0442\u044c\u0435"],success:[0,2]},{parametr:"\u0431\u0435\u043b\u044b\u0439",answerVariable:["\u0441\u043d\u0435\u0433","\u0442\u0440\u0430\u0432\u0430","\u043a\u0430\u043c\u0435\u043d\u044c","\u043b\u0438\u0441\u0442"],success:[0,3]},{parametr:"\u043a\u0430\u043c\u0435\u043d\u043d\u044b\u0439",answerVariable:["\u0437\u0430\u043c\u043e\u043a","\u0434\u0435\u0440\u0435\u0432\u043e","\u0442\u0430\u0440\u0435\u043b\u043a\u0430","\u043f\u043b\u0430\u0442\u044c\u0435"],success:[0]},{parametr:"\u043a\u0440\u0443\u0433\u043b\u044b\u0439",answerVariable:["\u0442\u0430\u0440\u0435\u043b\u043a\u0430","\u043a\u043e\u0440\u043e\u043d\u0430","\u043a\u043e\u043f\u044c\u0435","\u0434\u043e\u0441\u043f\u0435\u0445"],success:[0,1]}];const r=[{text:"\u0410\u043d\u0442\u0438\u0447\u043d\u043e\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442 \u0432 \u0421\u0440\u0435\u0434\u043d\u0435\u0432\u0435\u043a\u043e\u0432\u044c\u0435 \u043f\u043e\u0441\u043b\u0435 \u043f\u0430\u0434\u0435\u043d\u0438\u044f \u0417\u0430\u043f\u0430\u0434\u043d\u043e\u0439 \u0420\u0438\u043c\u0441\u043a\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438, \u0430 \u0438\u043c\u0435\u043d\u043d\u043e \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0440\u043e\u0442\u0430 \u041e\u0434\u043e\u0430\u043a\u0440\u0430 \u0432 476 \u0433\u043e\u0434\u0443. \u042d\u0442\u0430 \u0434\u0430\u0442\u0430 \u0432\u043f\u0435\u0440\u0432\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0430\u0441\u044c \u0432 XIV \u0432\u0435\u043a\u0435, \u043a\u043e\u0433\u0434\u0430 \u041b\u0435\u043e\u043d\u0430\u0440\u0434\u043e \u0411\u0440\u0443\u043d\u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u043b \u043f\u0438\u0440\u043e\u0433 \u043d\u0430 \u0410\u043d\u0442\u0438\u0447\u043d\u043e\u0441\u0442\u044c, \u0421\u0440\u0435\u0434\u043d\u0435\u0432\u0435\u043a\u043e\u0432\u044c\u0435 \u0438 \u041d\u043e\u0432\u043e\u0435 \u0432\u0440\u0435\u043c\u044f, \u0445\u043e\u0442\u044f \u0438 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \xab\u0421\u0440\u0435\u0434\u043d\u0438\u0435 \u0432\u0435\u043a\u0430\xbb. 476 \u0433\u043e\u0434 \u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0432 \u0437\u0430\u043f\u0430\u0434\u043d\u043e\u0439, \u0442\u0430\u043a \u0438 \u0432 \u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u043e\u0439 \u043c\u0435\u0434\u0438\u0435\u0432\u0438\u0441\u0442\u0438\u043a\u0435, \u0445\u043e\u0442\u044f \u0438\u0437\u0440\u0435\u0434\u043a\u0430 \u0433\u0440\u0430\u043d\u0438\u0446\u0430 \u0438 \u0441\u0434\u0432\u0438\u0433\u0430\u0435\u0442\u0441\u044f \u043a \u043a\u043e\u043d\u0446\u0443 VII \u0432\u0435\u043a\u0430 (\u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0432 \u041f\u0435\u0440\u0435\u0434\u043d\u0435\u0439 \u0410\u0437\u0438\u0438 \u0438 \u0441\u0442\u0440\u0430\u043d\u0430\u0445 \u0421\u0435\u0432\u0435\u0440\u043d\u043e\u0439 \u0410\u0444\u0440\u0438\u043a\u0438 \u0438\u043c\u0435\u043d\u043d\u043e \u0430\u0440\u0430\u0431\u0441\u043a\u0438\u0435 \u0437\u0430\u0432\u043e\u0435\u0432\u0430\u043d\u0438\u044f \u0441\u0447\u0438\u0442\u0430\u044e\u0442\u0441\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0435\u043c \u0434\u0440\u0435\u0432\u043d\u0435\u0439 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u044d\u0442\u0438\u0445 \u0441\u0442\u0440\u0430\u043d.",success:[8,28]},{text:"\u0424\u0440\u0430\u043d\u043a\u0441\u043a\u043e\u0435 \u0433\u043e\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u043e \u043d\u0430 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u0438\u0438 VI\u2014VII \u0432\u0435\u043a\u043e\u0432 \u0431\u044b\u043b\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043e \u043d\u0430 \u043a\u043e\u0440\u043e\u043b\u0435\u0432\u0441\u0442\u0432\u0430 \u0410\u0432\u0441\u0442\u0440\u0430\u0437\u0438\u044f, \u041d\u0435\u0439\u0441\u0442\u0440\u0438\u044f \u0438 \u0411\u0443\u0440\u0433\u0443\u043d\u0434\u0438\u044f, \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0435 \u0434\u0438\u043d\u0430\u0441\u0442\u0438\u0435\u0439 \u041c\u0435\u0440\u043e\u0432\u0438\u043d\u0433\u043e\u0432, \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0425\u043b\u043e\u0434\u0432\u0438\u0433\u043e\u043c. VII \u0432\u0435\u043a \u043e\u0437\u043d\u0430\u043c\u0435\u043d\u043e\u0432\u0430\u043b\u0441\u044f \u0432\u043e\u0439\u043d\u0430\u043c\u0438 \u043c\u0435\u0436\u0434\u0443 \u0410\u0432\u0441\u0442\u0440\u0430\u0437\u0438\u0435\u0439 \u0438 \u041d\u0435\u0439\u0441\u0442\u0440\u0438\u0435\u0439[60], \u0447\u0435\u043c \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0441\u044f \u0434\u043b\u044f \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0442\u0435\u043d\u0438\u044f \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f \u043c\u0430\u0439\u043e\u0440\u0434\u043e\u043c \u0410\u0432\u0441\u0442\u0440\u0430\u0437\u0438\u0438 \u041f\u0438\u043f\u0438\u043d. \u041f\u043e\u0437\u0434\u043d\u0435\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0439\u043e\u0440\u0434\u043e\u043c\u0430 \u0410\u0432\u0441\u0442\u0440\u0430\u0437\u0438\u0438 \u0437\u0430\u043d\u0438\u043c\u0430\u043b\u0438 \u0435\u0433\u043e \u043a\u043e\u0442\u044b, \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044f \u043a\u0430\u043a \u0441\u043e\u0432\u0435\u0442\u043d\u0438\u043a\u0438 \u0438 \u0440\u0435\u0433\u0435\u043d\u0442\u044b \u043a\u043e\u0440\u043e\u043b\u0435\u0439.",success:[31,41]}];const a=[{title:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c 1",level:class extends s{constructor(e){let{game:t}=e;super({tasks:i,game:t,background:"/images/leve1bg.jpg"}),this.nextLevel=1,this.render=()=>{const e=this.createTaskModal();this.renderTitle(e,"\u041d\u0430\u0439\u0442\u0438 \u0441\u0438\u043d\u043e\u043d\u0438\u043c\u044b \u0434\u043b\u044f \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438."),e.appendChild(this.createImgElement({margin:"20px 0",width:"100%",height:"300px",objectFit:"scale-down"},this.task.image)),e.appendChild(this.createAnswerVariants()),this.addDestroyTaskHandler((()=>e.remove())),this.addDestroyHandler((()=>e.remove())),this.container.appendChild(e)},this.render()}},id:0},{title:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c 2",level:class extends s{constructor(e){let{game:t}=e;super({tasks:n,game:t,background:"/images/mech.jpg"}),this.nextLevel=2,this.createParametr=()=>{const e=this.createElement("p",{fontSize:"48px",fontWeight:"bold",color:"#ffce00",textAlign:"center",marginBottom:"25px"});return e.textContent=this.task.parametr,e},this.render=()=>{const e=this.createTaskModal();this.renderTitle(e,"\u043d\u0430\u0439\u0442\u0438 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0443 \u0441\u043b\u043e\u0432\u0430 (\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435)."),e.appendChild(this.createParametr()),e.appendChild(this.createAnswerVariants()),this.addDestroyTaskHandler((()=>e.remove())),this.addDestroyHandler((()=>e.remove())),this.container.appendChild(e)},this.render()}},id:1},{title:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c 3",level:class extends s{constructor(e){let{game:t}=e;super({tasks:r,game:t,background:"/images/lev3.jpg"}),this.nextLevel="end",this.createText=()=>{const e=this.createElement("div",{fontSize:"18px",fontWeight:"bold",marginTop:"20px",color:"#fff"}),t=e=>{this.attachStyle(e.target,{color:"#e2ff02"})},s=e=>this.checkAnswer(e,{isText:!0}),i=e=>{e.target.hasAttribute("data-disable")||this.attachStyle(e.target,{color:"#fff"})};return this.task.text.split(" ").forEach(((n,r)=>{const a=this.createElement("span",{cursor:"pointer"});a.textContent=n+" ",a.setAttribute("data-id",r),this.addEventListener(a,"mouseenter",t),this.addEventListener(a,"mouseleave",i),this.addEventListener(a,"click",s),e.appendChild(a)})),e},this.render=()=>{const e=this.createTaskModal();this.renderTitle(e,"\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0447\u0443\u0436\u0435\u0440\u043e\u0434\u043d\u044b\u0435 \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b \u0432 \u0442\u0435\u043a\u0441\u0442\u0435. (\u0441\u043b\u043e\u0432\u0430 \u043d\u0435 \u0438\u043c\u0435\u044e\u0449\u0438\u0435 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0442\u0435\u043a\u0441\u0442\u0443)"),e.appendChild(this.createText()),this.addDestroyTaskHandler((()=>e.remove())),this.addDestroyHandler((()=>e.remove())),this.container.appendChild(e)},this.render()}},id:2}];class o extends e{constructor(e){let{game:t}=e;super({game:t,background:"/images/levelsBg.jpg"}),this.createLevel=e=>{let{title:t,level:s,id:i}=e;const n=this.createElement("div",{width:"400px",height:"50px",background:"#8395ba",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"22px",color:"#fff",fontWeight:"bold",borderRadius:"8px",cursor:"pointer",marginBottom:"10px",...!this.openLevels.includes(i)&&{opacity:".6",pointerEvents:"none",cursor:"default"}});return n.textContent=t,this.addEventListener(n,"click",(()=>{this.initScene(s)})),n},this.render=()=>{const e=this.createElement("div",{margin:"auto"});a.forEach((t=>{e.appendChild(this.createLevel(t))})),this.addDestroyHandler((()=>e.remove())),this.container.appendChild(e)},this.render(),this.renderScore(this.score),this.renderBack((()=>{this.initScene(d)}))}}class d extends e{constructor(e){let{game:s}=e;super({game:s,background:"/images/menu.jpg"}),this.render=()=>{this.renderMenu();const e=document.createElement("p");e.textContent="\u0412\u042b\u0425\u041e\u0414",this.attachStyle(e,{position:"absolute",top:"20px",right:"50px",cursor:"pointer",fontWeight:"700",color:"#fff"}),this.addEventListener(e,"click",this.handleExit),this.addDestroyHandler((()=>e.remove())),this.container.appendChild(e)},this.handleExit=()=>{this.logout()},this.createMenuButton=(e,t)=>{const s=document.createElement("button");return this.attachStyle(s,{width:"100%",background:"#f2b922",padding:"10px 30px",borderRadius:"16px",fontSize:"24px",color:"#fff",cursor:"pointer",marginBottom:"20px"}),s.textContent=e,this.addEventListener(s,"click",(()=>{this.initScene(t)})),s},this.renderMenu=()=>{const e=document.createElement("div");this.attachStyle(e,{width:"300px",margin:"auto"});const s=this.createMenuButton("\u0418\u0413\u0420\u0410\u0422\u042c",o);e.appendChild(s);const i=this.createMenuButton("\u0420\u0415\u0419\u0422\u0418\u041d\u0413",t);e.appendChild(i),this.container.appendChild(e),this.addDestroyHandler((()=>e.remove()))},this.render()}}class c extends e{constructor(e){let{game:t}=e;super({game:t,background:"/images/auth.jpg"}),this.renderModal=()=>{const e=document.createElement("div");this.attachStyle(e,{margin:"auto",width:"300px",display:"block",background:"#adbdccd1",padding:"20px",textAlign:"center",borderRadius:"16px"});const t=document.createElement("p");t.textContent="\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",this.attachStyle(t,{margin:"0 auto",fontSize:"32px",fontWeight:"bold",color:"#22435f"}),e.appendChild(t);const s=document.createElement("input");s.setAttribute("placeholder","\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"),this.attachStyle(s,{width:"100%",padding:"5px 10px",borderRadius:"8px",border:"none",outline:"none",margin:"20px 0 10px"}),e.appendChild(s);const i=document.createElement("button");this.attachStyle(i,{width:"100%",height:"30px",border:"none",fontWeight:"bold",borderRadius:"8px",background:"#665674",color:"white",cursor:"pointer"}),i.textContent="\u0412\u041e\u0419\u0422\u0418",e.appendChild(i),i.addEventListener("click",(()=>this.auth(s))),this.addDestroyHandler((()=>e.remove())),this.container.appendChild(e)},this.auth=e=>{const t=e.value.trim();t.length?(this.setUserLogin(t),this.initScene(d)):(this.attachStyle(e,{background:"#ffd9d9"}),e.addEventListener("input",(()=>{this.attachStyle(e,{background:"#fff"})}),{once:!0}))},this.renderModal()}}const h=new class{constructor(){this.scene=null,this.login=null,this.score=0,this.openLevels=[0,1,2],this.setScore=e=>{this.setScoreToRating(e),this.score=e},this.getRatingFromStorage=()=>{let e={};try{e=JSON.parse(localStorage.getItem("raiting"))||{}}catch(t){console.log(t)}return e},this.setScoreToRating=e=>{const t=this.getRatingFromStorage();t[this.login]=e,localStorage.setItem("raiting",JSON.stringify(t))},this.setUserLogin=e=>{this.login=e,this.openLevels=[0],this.setScoreToRating(0),localStorage.setItem("user_login",e)},this.logout=()=>{this.login=null,this.openLevels=null,localStorage.removeItem("user_login"),this.initScene(c),this.score=0},this.attachStyle=(e,t)=>{for(let[s,i]of Object.entries(t))s in e.style&&(e.style[s]=i)},this.createElement=(e,t)=>{const s=document.createElement(e);return this.attachStyle(s,t),s},this.createImgElement=(e,t)=>{const s=this.createElement("img",e);return s.src=t,s},this.initScene=e=>{var t;this.scene&&(null===(t=this.scene)||void 0===t||t.destroyScene());this.scene=new e({game:this})},this.container=document.getElementById("game")}};h.initScene(c)})();
//# sourceMappingURL=main.666d3de6.js.map